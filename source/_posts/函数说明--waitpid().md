title: 函数说明  waitpid()
categories: [C编程]
tags: []
date: 2012-08-24 15:56:00
---
<p>waitpid（等待子进程中断或结束）&nbsp;</p><p>&nbsp;<br />相关函数&nbsp;&nbsp;wait，fork<br />&nbsp;&nbsp;<br />表头文件&nbsp;&nbsp;#include&lt;sys/types.h&gt;<br />#include&lt;sys/wait.h&gt;<br />&nbsp;&nbsp;<br />定义函数&nbsp;&nbsp;pid_t&nbsp;waitpid(pid_t&nbsp;pid,int*&nbsp;status,int&nbsp;options);<br />&nbsp;&nbsp;<br />函数说明&nbsp;&nbsp;waitpid()<br />会暂时停止目前进程的执行，直到有信号来到或子进程结束。如果在调用wait()<br />时子进程已经结束，则wait()<br />会立即返回子进程结束状态值。子进程的结束状态值会由参数status<br />返回，而子进程的进程识别码也会一快返回。如果不在意结束状态值，则参数status<br />可以设成NULL。参数pid为欲等待的子进程识别码，其他数值意义如下:<br />pid&lt;-1&nbsp;等待进程组识别码为pid绝对值的任何子进程。<br />pid=-1&nbsp;等待任何子进程，相当于wait()。<br />pid=0&nbsp;等待进程组识别码与目前进程相同的任何子进程。<br />pid&gt;0&nbsp;等待任何子进程识别码为pid的子进程。<br />参数option可以为0&nbsp;或下面的OR&nbsp;组合<br />WNOHANG&nbsp;如果没有任何已经结束的子进程则马上返回，不予以等待。<br />WUNTRACED&nbsp;如果子进程进入暂停执行情况则马上返回，但结束状态不予以理会。<br />子进程的结束状态返回后存于status，底下有几个宏可判别结束情况<br />WIFEXITED(status)如果子进程正常结束则为非0值。<br />WEXITSTATUS(status)取得子进程exit()返回的结束代码，一般会先用WIFEXITED&nbsp;&nbsp;<br />来判断是否正常结束才能使用此宏。<br />WIFSIGNALED(status)如果子进程是因为信号而结束则此宏值为真<br />WTERMSIG(status)取得子进程因信号而中止的信号代码，一般会先用WIFSIGNALED&nbsp;&nbsp;<br />来判断后才使用此宏。<br />WIFSTOPPED(status)如果子进程处于暂停执行情况则此宏值为真。一般只有使用<br />WUNTRACED&nbsp;时才会有此情况。<br />WSTOPSIG(status)取得引发子进程暂停的信号代码，一般会先用WIFSTOPPED&nbsp;&nbsp;<br />来判断后才使用此宏。<br />&nbsp;&nbsp;<br />返回值&nbsp;&nbsp;如果执行成功则返回子进程识别码(PID)，如果有错误发生则返回-1<br />。失败原因存于errno中。</p><p><br /></p>