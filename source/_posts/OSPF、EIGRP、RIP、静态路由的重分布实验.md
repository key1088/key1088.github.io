title: OSPF、EIGRP、RIP、静态路由的重分布实验
categories: [网络工程]
tags: []
date: 2010-03-22 20:43:00
---
快毕业了，该复习了。今天没事无聊，开了这个博客，写点东西吧。<br /><br />网路拓扑图如下：<br /><br /><img src="/images/pic/96e6d3efba3d601162d09fc5.jpg" small="0" /><br /><br />因为是用工大瑞普模拟器做的CCNA路由版，就这么多路由器。主要是熟悉命令。<br /><br />路由器配置如下（为了空间问题，显示主要的）：<br />R1：<br /><br />interface Loopback0<br />ip address 1.1.1.1 255.255.255.0<br />!<br />interface Ethernet1/0<br />ip address 192.168.1.1 255.255.255.0<br />!<br />interface Ethernet1/1<br />no ip address<br />shutdown<br />!<br />interface Ethernet1/2<br />no ip address<br />shutdown<br />!<br />interface Ethernet1/3<br />no ip address<br />shutdown<br />!<br />router rip<br />network 1.0.0.0<br />network 192.168.1.0<br />!<br /><br />R2：<br /><br />interface FastEthernet0/0<br />ip address 192.168.1.2 255.255.255.0<br />duplex auto<br />speed auto<br />!<br />interface FastEthernet0/1<br />ip address 192.168.2.1 255.255.255.0<br />duplex auto<br />speed auto<br />!<br />router ospf 1<br />log-adjacency-changes<br />redistribute rip subnets<br />network 192.168.2.0 0.0.0.255 area 0<br />!<br />router rip<br />redistribute ospf 1<br />network 192.168.1.0<br />default-metric 2<br />!<br /><br />R3：<br /><br />interface Ethernet1/0<br />ip address 192.168.2.2 255.255.255.0<br />!<br />interface Ethernet1/1<br />ip address 192.168.3.1 255.255.255.0<br />!<br />interface Ethernet1/2<br />no ip address<br />shutdown<br />!<br />interface Ethernet1/3<br />no ip address<br />shutdown<br />!<br />router eigrp 1<br />redistribute ospf 1<br />network 192.168.3.0<br />default-metric 1000 10 1 255 1500<br />no eigrp log-neighbor-changes<br />!<br />router ospf 1<br />log-adjacency-changes<br />redistribute eigrp 1 subnets<br />network 192.168.2.0 0.0.0.255 area 0<br />!<br /><br />R4:<br /><br />interface Ethernet1/0<br />ip address 192.168.3.2 255.255.255.0<br />!<br />interface Ethernet1/1<br />ip address 192.168.4.1 255.255.255.0<br />!<br />interface Ethernet1/2<br />no ip address<br />shutdown<br />!<br />interface Ethernet1/3<br />no ip address<br />shutdown<br />!<br />router eigrp 1<br />redistribute static<br />network 192.168.3.0<br />network 192.168.4.0<br />default-metric 1000 10 1 255 1500<br />no eigrp log-neighbor-changes<br />!<br />ip classless<br />ip route 2.2.2.0 255.255.255.0 192.168.4.2<br />no ip http server<br />!<br /><br />R5:<br /><br />interface Loopback0<br />ip address 2.2.2.2 255.255.255.0<br />!<br />interface FastEthernet0/0<br />ip address 192.168.4.2 255.255.255.0<br />duplex auto<br />speed auto<br />!<br />interface FastEthernet0/1<br />no ip address<br />shutdown<br />duplex auto<br />speed auto<br />!<br />ip classless<br />ip route 1.1.1.0 255.255.255.0 192.168.4.1<br />ip route 192.168.1.0 255.255.255.0 192.168.4.1<br />ip route 192.168.2.0 255.255.255.0 192.168.4.1<br />ip route 192.168.3.0 255.255.255.0 192.168.4.1<br />no ip http server<br />!<br /><br />路由表情况。<br /><br />R1:<br />R1#SH IP ROute<br />Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br />D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br />N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br />E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br />i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br />* - candidate default, U - per-user static route, o - ODR<br />P - periodic downloaded static route<br /><br />Gateway of last resort is not set<br /><br />1.0.0.0/24 is subnetted, 1 subnets<br />C&#160;&#160;&#160;&#160;&#160;&#160; 1.1.1.0 is directly connected, Loopback0<br />R&#160;&#160;&#160; 2.0.0.0/8 [120/2] via 192.168.1.2, 00:00:15, Ethernet1/0<br />R&#160;&#160;&#160; 192.168.4.0/24 [120/2] via 192.168.1.2, 00:00:15, Ethernet1/0<br />C&#160;&#160;&#160; 192.168.1.0/24 is directly connected, Ethernet1/0<br />R&#160;&#160;&#160; 192.168.2.0/24 [120/2] via 192.168.1.2, 00:00:15, Ethernet1/0<br />R&#160;&#160;&#160; 192.168.3.0/24 [120/2] via 192.168.1.2, 00:00:15, Ethernet1/0<br /><br />R2：<br /><br />R2#sh ip route<br />Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br />D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br />N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br />E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br />i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br />* - candidate default, U - per-user static route, o - ODR<br />P - periodic downloaded static route<br /><br />Gateway of last resort is not set<br /><br />R&#160;&#160;&#160; 1.0.0.0/8 [120/1] via 192.168.1.1, 00:00:15, FastEthernet0/0<br />2.0.0.0/24 is subnetted, 1 subnets<br />O E2&#160;&#160;&#160; 2.2.2.0 [110/20] via 192.168.2.2, 00:22:20, FastEthernet0/1<br />O E2 192.168.4.0/24 [110/20] via 192.168.2.2, 00:22:20, FastEthernet0/1<br />C&#160;&#160;&#160; 192.168.1.0/24 is directly connected, FastEthernet0/0<br />C&#160;&#160;&#160; 192.168.2.0/24 is directly connected, FastEthernet0/1<br />O E2 192.168.3.0/24 [110/20] via 192.168.2.2, 00:22:20, FastEthernet0/1<br /><br />R3:<br /><br /><br />R3#SH IP ROute<br />Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br />D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br />N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br />E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br />i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br />* - candidate default, U - per-user static route, o - ODR<br />P - periodic downloaded static route<br /><br />Gateway of last resort is not set<br /><br />O E2 1.0.0.0/8 [110/20] via 192.168.2.1, 00:21:47, Ethernet1/0<br />2.0.0.0/24 is subnetted, 1 subnets<br />D EX&#160;&#160;&#160; 2.2.2.0 [170/2588160] via 192.168.3.2, 00:32:31, Ethernet1/1<br />D&#160;&#160;&#160; 192.168.4.0/24 [90/307200] via 192.168.3.2, 00:32:31, Ethernet1/1<br />O E2 192.168.1.0/24 [110/20] via 192.168.2.1, 00:21:47, Ethernet1/0<br />C&#160;&#160;&#160; 192.168.2.0/24 is directly connected, Ethernet1/0<br />C&#160;&#160;&#160; 192.168.3.0/24 is directly connected, Ethernet1/1<br /><br /><br />R4:<br /><br />R4#SH IP ROute<br />Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br />D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br />N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br />E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br />i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br />* - candidate default, U - per-user static route, o - ODR<br />P - periodic downloaded static route<br /><br />Gateway of last resort is not set<br /><br />D EX 1.0.0.0/8 [170/2588160] via 192.168.3.1, 00:17:03, Ethernet1/0<br />2.0.0.0/24 is subnetted, 1 subnets<br />S&#160;&#160;&#160;&#160;&#160;&#160; 2.2.2.0 [1/0] via 192.168.4.2<br />C&#160;&#160;&#160; 192.168.4.0/24 is directly connected, Ethernet1/1<br />D EX 192.168.1.0/24 [170/2588160] via 192.168.3.1, 00:17:03, Ethernet1/0<br />D EX 192.168.2.0/24 [170/2588160] via 192.168.3.1, 00:17:03, Ethernet1/0<br />C&#160;&#160;&#160; 192.168.3.0/24 is directly connected, Ethernet1/0<br /><br /><br />R5:<br /><br />R5#SH IP ROute<br />Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br />D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br />N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br />E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br />i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br />* - candidate default, U - per-user static route, o - ODR<br />P - periodic downloaded static route<br /><br />Gateway of last resort is not set<br /><br />1.0.0.0/24 is subnetted, 1 subnets<br />S&#160;&#160;&#160;&#160;&#160;&#160; 1.1.1.0 [1/0] via 192.168.4.1<br />2.0.0.0/24 is subnetted, 1 subnets<br />C&#160;&#160;&#160;&#160;&#160;&#160; 2.2.2.0 is directly connected, Lo
opback0<br />C&#160;&#160;&#160; 192.168.4.0/24 is directly connected, FastEthernet0/0<br />S&#160;&#160;&#160; 192.168.1.0/24 [1/0] via 192.168.4.1<br />S&#160;&#160;&#160; 192.168.2.0/24 [1/0] via 192.168.4.1<br />S&#160;&#160;&#160; 192.168.3.0/24 [1/0] via 192.168.4.1<br /><br /><br /><br /><br />测试结果：<br /><br /><br />R1#ping 2.2.2.2<br /><br />Type escape sequence to abort.<br />Sending 5, 100-byte ICMP Echos to 2.2.2.2, timeout is 2 seconds:<br />!!!!!<br />Success rate is 100 percent (5/5), round-trip min/avg/max = 8/36/64 ms<br />R1#ping 192.168.2.1<br /><br />Type escape sequence to abort.<br />Sending 5, 100-byte ICMP Echos to 192.168.2.1, timeout is 2 seconds:<br />!!!!!<br />Success rate is 100 percent (5/5), round-trip min/avg/max = 8/20/32 ms<br />R1#ping 192.168.3.1<br /><br />Type escape sequence to abort.<br />Sending 5, 100-byte ICMP Echos to 192.168.3.1, timeout is 2 seconds:<br />!!!!!<br />Success rate is 100 percent (5/5), round-trip min/avg/max = 12/32/60 ms<br />R1#ping 192.168.4.1<br /><br />Type escape sequence to abort.<br />Sending 5, 100-byte ICMP Echos to 192.168.4.1, timeout is 2 seconds:<br />!!!!!<br />Success rate is 100 percent (5/5), round-trip min/avg/max = 4/38/64 ms<br /><br />成功！！！！<br /><br /><br /><br />