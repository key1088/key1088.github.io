title: dbx使用
categories: [C编程]
tags: [C;dbx]
date: 2012-11-28 09:33:00
---
<p>1、当程序发生Segmentation fault错误时，会生成core文件，用dbx定位那行代码引起的<br />$ dbx pgm core<br />Type 'help' for help.<br />warning: The core file is not a fullcore. Some info may<br />not be available.<br />[using memory image in core]<br />reading symbolic information ...</p><p>Segmentation fault in main at line 122<br />122&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;pint: %dn&quot;, *pint); //要在这里输出源码，cc编译时必须指定-g选项<br />2、当程序运行进入死循环不退出时，attach进程，定位程序正在执行的代码位置<br />例如pgm程序一直运行不结束<br />$ ps -ef|grep pgm<br />usr1 1347736 483328 115 11:28:58 pts/1 0:06 pgm<br />usr1 1507512 667666&nbsp;&nbsp; 0 11:29:06 pts/7 0:00 grep pgm<br />$ dbx -a 1347736<br />Waiting to attach to process 1347736 ...<br />Successfully attached to pgm.<br />Type 'help' for help.<br />reading symbolic information ...<br />stopped in unnamed block in main at line 26<br />&nbsp;&nbsp; 26&nbsp;&nbsp; while (1){<br />(dbx) quit //pgm程序同时会结束运行，但可以先detach这个进程再退出。<br />4）查看运行中变量值，dump当前proc中的所有变量<br />(dbx) dump<br />main(), line 40 in &quot;pgm.c&quot;<br />pint = 0x2ff22ba0<br />pintvar = 5<br />pstring = &quot;&quot;<br />__func__ = &quot;main&quot;<br />(dbx)<br />如果需要查看某个内存地址值，命令：address/mode<br />例如pint指针地址（pint_addr: 804399856），二进制为：0x2ff22af0，<br />(dbx) 0x2ff22af0/D&nbsp;&nbsp; //按十进制打印一个长字<br />0x2ff22af0: 5</p><p>$man ulimit</p><p>ulimit Command</p><p>Purpose</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sets or reports user resource limits.</p><p>Syntax</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ulimit [ -H ] [ -S ] [ -a ] [ -c ] [ -d ] [ -f ] [ -m ] [ -n ] [ -r ] [ -s ] [ -t ] [-u ][ Limit ]</p><p>Description</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The ulimit command sets or reports user process resource limits, as defined in the /etc/security/limits file. This file<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contains these default limits:</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fsize = 2097151<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; core = 2097151<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cpu = -1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data = 262144<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rss = 65536<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stack = 65536<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nofiles = 2000<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; threads = -1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nproc = -1</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; These values are used as default settings when a new user is added to the system. The values are set with the mkuser<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; command when the user is added to the system, or changed with the chuser command.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Limits are categorized as either soft or hard. With the ulimit command, you can change your soft limits, up to the maximum<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set by the hard limits. You must have root user authority to change resource hard limits.</p><p>test $ ulimit -c<br />0<br />test $ ulimit -c 1000<br />test $ ulimit -c<br />1000</p><p>#&amp;g_test/16x 显示从 g_test 的地址开始处，连续 16 个 WORD（?byte）的取值</p><p>列举寄存器内容：</p><p>(dbx) registers</p><p>&nbsp;<img src="/images/pic/4afe5e81d158ccbf4465478a19d8bc3eb035414d.jpg" small="0" /><br /></p><p>显示寄存器中变量值，例如显示$r0的值&nbsp;</p><p>(dbx)p $r0</p><p>0x100001bc </p>