title: 内网渗透利器--reDuh（webshell跳板）简单使用说明
categories: [网络安全]
tags: []
date: 2011-10-21 17:57:00
---
<p>很给力的工具，就是速度稍微有点慢，也不怕被墙。</p><p>&nbsp;</p><p>作者：<a href="http://www.sai52.com/archives/848/" target="_blank" rel="noopener noreferrer">sai52[B.H.S.T]</a></p><p>国外大牛的作品，偶顺手写了个使用说明。E文好的看原文&nbsp; <a href="http://www.sensepost.com/research/reDuh/" target="_blank" rel="noopener noreferrer">http://www.sensepost.com/research/reDuh/</a></p><p>这个工具可以把内网服务器的端口通过http/https隧道转发到本机，形成一个连通回路。用于目标服务器在内网或做了端口策略的情况下连接目标服务器内部开放端口。</p><p>本机-------客户端---------（http隧道）-----------服务端------------------内网服务器</p><p>服务端是个webshell（针对不同服务器有aspx,php,jsp三个版本），客户端是java写的，本机执行最好装上JDK。<br /></p><p>把客户端文件解包，这里我把它放到E盘的TEST文件夹</p><p><a href="http://huaidan.org/images/2009/03/011.png"><img src="/images/pic/8bcd4bae38a2ff7a4b36d69a.jpg" width="500" height="239" /></a><br />图01</p><p>把服务端的webshell上传到目标服务器。</p><p><a href="http://huaidan.org/images/2009/03/021.png"><img src="/images/pic/b694b1ec8244c245acafd59a.jpg" width="386" height="206" /></a><br />图02</p><p>目标服务器在内网，开了终端服务。</p><p><a href="http://huaidan.org/images/2009/03/031.png"><img src="/images/pic/4cd60c0abe7b25dc2eddd49a.jpg" width="499" height="413" /></a><br />图03</p><p>命令行下用客户端连接服务端</p><p>E:test&gt;java reDuhClient 目标服务器域名 http 80 /WEBSHELL路径/reDuh.aspx</p><p>liunx下面</p><p>chmod +x reDuchClient.jar</p><p>./reDuchClient.jar 目标服务器域名 http 80 /WEBSHELL路径/reDuh.aspx</p><p>现在版本更新了，命令也有所改变，自己看一个帮助吧。或者直接程序文件不加参数，会给你提示的</p><p><a href="http://huaidan.org/images/2009/03/041.png"><img src="/images/pic/0a297beac532a84cb80e2d80.jpg" width="500" height="112" /></a><br />图04</p><p>新开一个命令行，用NC连接本机1010端口。</p><p>H:&gt;nc -vv localhost 1010</p><p><a href="http://huaidan.org/images/2009/03/051.png"><img src="/images/pic/86d04302dc0c317d7bec2c80.jpg" width="499" height="96" /></a><br />图05</p><p>连接成功会有欢迎提示，之后输入命令</p><p>&gt;&gt;[createTunnel]1234:127.0.0.1:3389</p><p>前面的1234是本机连接用的端口，中间的ip地址是目标服务器的（可以是webshell所在服务器也可以是和它同内网的服务器），后面的3389是欲连接目标服务器的端口。</p><p>成功后两个命令行窗口都会有成功提示。</p><p><a href="http://huaidan.org/images/2009/03/061.png"><img src="/images/pic/be385b3c463df29f54e72380.jpg" width="500" height="121" /></a><br />图06</p><p><a href="http://huaidan.org/images/2009/03/071.png"><img src="/images/pic/f13031355ae2a7aea3cc2b9a.jpg" width="500" height="135" /></a><br />图07</p><p>这时通道已经建立，你连接本机的1234端口就相当于连接到目标服务器的3389端口了。</p><p><a href="http://huaidan.org/images/2009/03/081.png"><img src="/images/pic/cc0fd6acd9902abf7cd92a9a.jpg" width="407" height="231" /></a><br />图08</p><p><a href="http://huaidan.org/images/2009/03/091.png"><img src="/images/pic/a606c20d84dfdd9436d12280.jpg" width="499" height="243" /></a><br />图09</p><p>数据的传递过程</p><p><a href="http://huaidan.org/images/2009/03/101.png"><img src="/images/pic/3f3701ef54d3bfa22f2e2180.jpg" width="499" height="134" /></a><br />图10</p><p>需要注意的是用此工具转发数据速度很慢，连接的时候应尽量把mstsc的颜色设置调低些。</p><p>reDuh客户端下载&nbsp; <a href="http://www.sensepost.com/research/reDuh/reDuhClient-0.3.zip" target="_blank" rel="noopener noreferrer">reduhclient-0.3.zip</a><br />reDuh服务端下载&nbsp; <a href="http://www.sensepost.com/research/reDuh/reDuh-server-all.tgz" target="_blank" rel="noopener noreferrer">reduh-server-all.gz</a></p>