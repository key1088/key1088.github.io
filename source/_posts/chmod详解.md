title: chmod详解
categories: [Linux]
tags: []
date: 2010-05-22 10:12:00
---
<br />chmod命令是非常重要的，用于改变文件或目录的访问权限。用户用它控制文件或目录的访问权限。<br />该命令有两种用法。一种是包含字母和操作符表达式的文字设定法；另一种是包含数字的数字设定法。<br />1. 文字设定法<br />chmod [who] [+ | - | =] [mode] 文件名? <br />命令中各选项的含义为：<br />操作对象who可是下述字母中的任一个或者它们的组合：<br /><br />u 表示“用户（user）”，即文件或目录的所有者。<br />g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。<br />o 表示“其他（others）用户”。<br />a 表示“所有（all）用户”。它是系统默认值。<br />操作符号可以是：<br />+ 添加某个权限。<br />- 取消某个权限。<br />= 赋予给定权限并取消其他所有权限（如果有的话）。<br />设置mode所表示的权限可用下述字母的任意组合：<br />r 可读。<br />w 可写。<br />x 可执行。<br />X 只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x 属性。<br />s 在文件执行时把进程的属主或组ID置为该文件的文件属主。方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。<br />（为了方便普通用户执行一些特权命令，SUID/SGID程序允许普通用户以root身份暂时执行该程序，并在执行结束后再恢复身份<br />chmod +s 就是给某个程序或者教本以suid权限 ）<br />t 保存程序的文本到交换设备上。<br />u 与文件属主拥有一样的权限。<br />g 与和文件属主同组的用户拥有一样的权限。<br />o 与其他用户拥有一样的权限。<br />文件名：以空格分开的要改变权限的文件列表，支持通配符。<br />在一个命令行中可给出多个权限方式，其间用逗号隔开。例如：chmod g+r，o+r example<br />使同组和其他用户对文件example 有读权限。<br />2. 数字设定法<br />我们必须首先了解用数字表示的属性的含义：0表示没有权限，1表示可执行权限，2表示可写权限，4表示可读权限，然后将其相加。所以数字属性的格式应为3个从0到7的八进制数，其顺序是（u）（g）（o）。<br />例如，如果想让某个文件的属主有“读/写”二种权限，需要把4（可读）+2（可写）＝6（读/写）。<br />数字设定法的一般形式为：<br />chmod [mode] 文件名? <br />例子：<br />（1）文字设定法：<br />例1：$ chmod a+x sort<br />即设定文件sort的属性为：<br />文件属主（u） 增加执行权限<br />与文件属主同组用户（g） 增加执行权限<br />其他用户（o） 增加执行权限　<br />例2：$ chmod ug+w，o-x text<br />即设定文件text的属性为：<br />文件属主（u） 增加写权限<br />与文件属主同组用户（g） 增加写权限<br />其他用户（o） 删除执行权限<br />例3：$ chmod u+s a.out<br />假设执行chmod后a.out的权限为（可以用ls – l a.out命令来看）：<br />–rws--x--x 1 inin users 7192 Nov 4 14:22 a.out<br />并且这个执行文件要用到一个文本文件shiyan1.c，其文件存取权限为“–rw-------”，即该文件只有其属主具有读写权限。<br />当其他用户执行a.out这个程序时，他的身份因这个程序暂时变成inin（由于chmod命令中使用了s选项），所以他就能够读取shiyan1.c这个文件（虽然这个文件被设定为其他人不具备任何权限），这就是s的功能。<br />因此，在整个系统中特别是root本身，最好不要过多的设置这种类型的文件（除非必要）这样可以保障系统的安全，避免因为某些程序的bug而使系统遭到入侵。<br />例4：$ chmod a–x mm.txt<br />$ chmod –x mm.txt<br />$ chmod ugo–x mm.txt<br />以上这三个命令都是将文件mm.txt的执行权限删除，它设定的对象为所有使用者。<br />（2）数字设定法：<br />例1： $ chmod 644 mm.txt<br />$ ls –l<br />即设定文件mm.txt的属性为：<br />-rw-r--r-- 1 inin users 1155 Nov 5 11:22 mm.txt<br />文件属主（u）inin 拥有读、写权限<br />与文件属主同组人用户（g） 拥有读权限<br />其他人（o） 拥有读权限<br />例2： $ chmod 750 wch.txt<br />$ ls –l<br />-rwxr-x--- 1 inin users 44137 Nov 12 9:22 wchtxt<br />即设定wchtxt这个文件的属性为：<br />文件主本人（u）inin 可读/可写/可执行权<br />与文件主同组人（g） 可读/可执行权<br />其他人（o） 没有任何权限