title: osfp中发布静态路由
categories: [网络工程]
tags: []
date: 2010-03-22 18:45:00
---
拓扑图如下：<br /><br /><img src="/images/pic/007d91fb4e745039d9f9fdcf.jpg" small="0" /><br /><br /><br />配置如下：<br />R1#sh running-config<br />Building configuration...<br /><br />Current configuration:<br />!<br />version 12.1<br />service timestamps debug uptime<br />service timestamps log uptime<br />no service password-encryption<br />!<br />hostname R1<br />!<br />!<br />!<br />!<br />!<br />!<br />memory-size iomem 15<br />ip subnet-zero<br />!<br />!<br />!<br />!<br />interface Loopback0<br />ip address 1.1.1.1 255.255.255.0<br />!<br />interface Loopback1<br />ip address 3.3.3.3 255.255.255.0<br />!<br />interface FastEthernet0/0<br />no ip address<br />shutdown<br />duplex auto<br />speed auto<br />!<br />interface FastEthernet0/1<br />ip address 192.168.1.1 255.255.255.0<br />duplex auto<br />speed auto<br />!<br />router ospf 1<br />log-adjacency-changes<br />redistribute static subnets<br />!<br />ip classless<br />ip route 2.2.2.0 255.255.255.0 192.168.1.2<br />ip route 4.4.4.0 255.255.255.0 192.168.1.2<br />ip route 172.16.0.0 255.255.0.0 192.168.1.2<br />no ip http server<br />!<br />!<br />line con 0<br />transport input none<br />line aux 0<br />line vty 0 4<br />login<br />!<br />end<br /><br /><br /><br />R2#sh running-config<br />Building configuration...<br /><br />Current configuration:<br />!<br />version 12.1<br />service timestamps debug uptime<br />service timestamps log uptime<br />no service password-encryption<br />!<br />hostname R2<br />!<br />!<br />!<br />!<br />!<br />!<br />memory-size iomem 15<br />ip subnet-zero<br />!<br />!<br />!<br />!<br />interface Ethernet1/0<br />ip address 192.168.1.2 255.255.255.0<br />!<br />interface Ethernet1/1<br />ip address 172.16.1.1 255.255.0.0<br />!<br />interface Ethernet1/2<br />no ip address<br />shutdown<br />!<br />interface Ethernet1/3<br />no ip address<br />shutdown<br />!<br />router ospf 1<br />log-adjacency-changes<br />redistribute static subnets<br />network 172.16.0.0 0.0.255.255 area 0<br />network 192.168.1.0 0.0.0.255 area 0<br /><br />!<br />ip classless<br />ip route 1.1.1.0 255.255.255.0 192.168.1.1<br />ip route 3.3.3.0 255.255.255.0 192.168.1.1<br />no ip http server<br />!<br />!<br />line con 0<br />transport input none<br />line aux 0<br />line vty 0 4<br />login<br />!<br />end<br /><br /><br /><br />R3#sh running-config<br />Building configuration...<br /><br />Current configuration:<br />!<br />version 12.1<br />service timestamps debug uptime<br />service timestamps log uptime<br />no service password-encryption<br />!<br />hostname R3<br />!<br />!<br />!<br />!<br />!<br />!<br />memory-size iomem 15<br />ip subnet-zero<br />!<br />!<br />!<br />!<br />interface Loopback0<br />ip address 2.2.2.2 255.255.255.0<br />!<br />interface Loopback2<br />ip address 4.4.4.4 255.255.255.0<br />!<br />interface Ethernet1/0<br />ip address 172.16.1.2 255.255.0.0<br />!<br />interface Ethernet1/1<br />no ip address<br />shutdown<br />!<br />interface Ethernet1/2<br />no ip address<br />shutdown<br />!<br />interface Ethernet1/3<br />no ip address<br />shutdown<br />!<br />router ospf 1<br />log-adjacency-changes<br />network 2.2.2.0 0.0.0.255 area 2<br />network 4.4.4.0 0.0.0.255 area 3<br />network 172.16.0.0 0.0.255.255 area 0<br />!<br />ip classless<br />no ip http server<br />!<br />!<br />line con 0<br />transport input none<br />line aux 0<br />line vty 0 4<br />login<br />!<br />end<br /><br />路由表显示<br /><br />R1#sh ip route<br />Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br />D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br />N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br />E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br />i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br />* - candidate default, U - per-user static route, o - ODR<br />P - periodic downloaded static route<br /><br />Gateway of last resort is not set<br /><br />1.0.0.0/24 is subnetted, 1 subnets<br />C&#160;&#160;&#160;&#160;&#160;&#160; 1.1.1.0 is directly connected, Loopback0<br />2.0.0.0/24 is subnetted, 1 subnets<br />S&#160;&#160;&#160;&#160;&#160;&#160; 2.2.2.0 [1/0] via 192.168.1.2<br />3.0.0.0/24 is subnetted, 1 subnets<br />C&#160;&#160;&#160;&#160;&#160;&#160; 3.3.3.0 is directly connected, Loopback1<br />4.0.0.0/24 is subnetted, 1 subnets<br />S&#160;&#160;&#160;&#160;&#160;&#160; 4.4.4.0 [1/0] via 192.168.1.2<br />S&#160;&#160;&#160; 172.16.0.0/16 [1/0] via 192.168.1.2<br />C&#160;&#160;&#160; 192.168.1.0/24 is directly connected, FastEthernet0/1<br /><br /><br /><br />R2#sh ip route<br />Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br />D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br />N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br />E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br />i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br />* - candidate default, U - per-user static route, o - ODR<br />P - periodic downloaded static route<br /><br />Gateway of last resort is not set<br /><br />1.0.0.0/24 is subnetted, 1 subnets<br />S&#160;&#160;&#160;&#160;&#160;&#160; 1.1.1.0 [1/0] via 192.168.1.1<br />2.0.0.0/32 is subnetted, 1 subnets<br />O IA&#160;&#160;&#160; 2.2.2.2 [110/11] via 172.16.1.2, 00:01:12, Ethernet1/1<br />3.0.0.0/24 is subnetted, 1 subnets<br />S&#160;&#160;&#160;&#160;&#160;&#160; 3.3.3.0 [1/0] via 192.168.1.1<br />4.0.0.0/32 is subnetted, 1 subnets<br />O IA&#160;&#160;&#160; 4.4.4.4 [110/11] via 172.16.1.2, 00:01:12, Ethernet1/1<br />C&#160;&#160;&#160; 172.16.0.0/16 is directly connected, Ethernet1/1<br />C&#160;&#160;&#160; 192.168.1.0/24 is directly connected, Ethernet1/0<br /><br /><br />R3#sh ip route<br />Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br />D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br />N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br />E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br />i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br />* - candidate default, U - per-user static route, o - ODR<br />P - periodic downloaded static route<br /><br />Gateway of last resort is not set<br /><br />1.0.0.0/24 is subnetted, 1 subnets<br />O E2&#160;&#160;&#160; 1.1.1.0 [110/20] via 172.16.1.1, 00:01:19, Ethernet1/0<br />2.0.0.0/24 is subnetted, 1 subnets<br />C&#160;&#160;&#160;&#160;&#160;&#160; 2.2.2.0 is directly connected, Loopback0<br />3.0.0.0/24 is subnetted, 1 subnets<br />O E2&#160;&#160;&#160; 3.3.3.0 [110/20] via 172.16.1.1, 00:01:19, Ethernet1/0<br />4.0.0.0/24 is subnetted, 1 subnets<br />C&#160;&#160;&#160;&#160;&#160;&#160; 4.4.4.0 is directly connected, Loopback2<br />C&#160;&#160;&#160; 172.16.0.0/16 is directly connected, Ethernet1/0<br />O&#160;&#160;&#160; 192.168.1.0/24 [110/20] via 172.16.1.1, 00:01:19, Ethernet1/0<br /><br />测试：<br /><br /><br />R1#ping 4.4.4.4<br /><br />Type escape sequence to abort.<br />Sending 5, 100-byte ICMP Echos to 4.4.4.4, timeout is 2 seconds:<br />!!!!!<br />Success rate is 100 percent (5/5), round-trip min/avg/max = 12/19/28 ms<br />R1#ping 2.2.2.2<br /><br />Type escape sequence to abort.<br />Sending 5, 100-byte ICMP Echos to 2.2.2.2, timeout is 2 seconds:<br />!!!!!<br />Success rate is 100 percent (5/5), round-trip min/avg/max = 8/15/28 ms<br /><br /><br /><br />R3#ping 1.1.1.1<br /><br />Type escape sequence to abort.<br />Sending 5, 100-byte ICMP Echos to 1.1.1.1, timeout is 2 seconds:<br />!!!!!<br />Success rate is 100 percent (5/5), round-trip min/avg/max = 16/20/24 ms<br />R3#ping 3.3.3.3<br /><br />Type escape sequence to abort.<br />Sending 5, 100-byte ICMP Echos to 3.3.3.3, timeout is 2 seconds:<br />!!!!!<br />Success rate is 100 percent (5/5), round-trip min/avg/max = 12/16/24 ms<br /><br /><br /><br />如有转载请写明出处http://hi.baidu.com/key1088。<br /><br /><br /><br /><br /><br />